## Trends_Analysis_in_RealEstate

## Анализ трендов в строительстве с использованием NLP

### Dataset
Датасет состоит из сообщений собранных из 15 телеграмм-каналов:
- Движение.ру
- Всё о стройке
- Железобетонный замес
- Ипотека в России. Новости и аналитика
- Ипотека и недвижимость
- Недвижимость инсайды
- Торг уместен
- Прожектор новостроек – аналитика bnMAP.pro
- Не движется
- Треугольный метр
- РИА Недвижимость
- Пульс Продаж Новостроек
- Движ про недвиж
- Бойко о недвижимости
- Pro недвижимость. Smarent

Первоначально собрано 112 000 сообщений за 2019-2024 годы. В дальнейшем анализе будут использоваться данные только   2023 и 2024 годов.

## Notebook с кодом для парсинга телеграмм каналов.
https://colab.research.google.com/drive/1kkR_Z7Ilgl2pZeV8YaxHZBG0oSEWN5jO?usp=sharing

Код выполняет следующие действия для извлечения и обработки сообщений из Telegram-каналов:

- **Подключение к Telegram API:** Использует библиотеку Telethon для подключения к Telegram API с указанными `api_id`, `api_hash` и сессией.
- **Очистка текста сообщений:** Определяет функцию `remove_unwanted_characters` для удаления нежелательных символов из текста сообщений (оставляет только буквы, цифры, пробелы и основные знаки препинания).
- **Извлечение сообщений из канала:** Функция `fetch_messages_from_channel` получает историю сообщений из указанного канала Telegram.
    - Использует `GetHistoryRequest` для получения сообщений партиями (по 100 за раз).
    - Обрабатывает ошибки `FloodWaitError` (ограничение скорости запросов) и другие исключения.
    - Очищает текст каждого сообщения с помощью `remove_unwanted_characters`.
    - Сохраняет дату, текст и название канала в DataFrame.
- **Сбор данных из нескольких каналов:** Функция `main` выполняет следующие действия:
    - Инициализирует пустой DataFrame `combined_df`.
    - Итерируется по списку `channel_usernames` (предполагается, что этот список определен вне данного кода).
    - Для каждого канала вызывает `fetch_messages_from_channel` для получения DataFrame с сообщениями.
    - Объединяет DataFrame сообщений из каждого канала в `combined_df`.
    - Выводит `combined_df` в консоль.
- **Запуск асинхронного кода:** Использует `asyncio.run` для запуска асинхронной функции `main` и сохраняет результат (DataFrame) в переменную `df`.
- **Результат:** В итоге было скачано 112597 сообщений из Telegram каналов.

Данные сохранены и доступны в googlesheet:
https://docs.google.com/spreadsheets/d/1-3pzWa6GN4n0ukZEa2_e524j74kxpx1E/edit?usp=sharing&ouid=105790878003907527731&rtpof=true&sd=true


## Предварительный анализ текстов

### Предварительно произведем очистку и лемматизацию текстов

В сообщениях встречается набор имен собственных, в которых имеется точка. Этот могут быть наименования компаний или сайтов. Например: dvizhenie.ru, ДОМ.РФ, НН.ru
Для того, чтобы не потерять эти имена при очистке текстов от знаков препинания. Обработаем такие точки как исключения: заменив сначала их на _DOT_, а потом вернем точку обратно.

### Проанализируем длинну сообщений
![image](https://github.com/user-attachments/assets/944012af-47ae-498b-8d40-c0e66df5870d)

В дальнейшем будем убирать из датасета сообщения содержащие меньше 10 и больше 400 слов.

### Подсчитаем количество сообщений в каждом из кварталов 2023 и 2024 годов

Number of messages in each quarter:

2023Q1: 6236 messages
2023Q2: 6727 messages Прирост к предыдущему кварталу: 8%
2023Q3: 6787 messages Прирост к предыдущему кварталу: 1%
2023Q4: 6949 messages Прирост к предыдущему кварталу: 2%

2024Q1: 6527 messages Прирост к предыдущему кварталу: -6%
2024Q2: 7294 messages Прирост к предыдущему кварталу: 12%
2024Q3: 7331 messages Прирост к предыдущему кварталу: 1%
2024Q4: 8003 messages Прирост к предыдущему кварталу: 9%

Общий вывод здесь заключается в том, что значиельных и критических отличий в количестве сообщений нет. 
Но некоторая динамика на увеличение количеста сообщений имеется - в среднем рост до 10%, и падение количества сообщений только в 1 квартале 2024 года.
